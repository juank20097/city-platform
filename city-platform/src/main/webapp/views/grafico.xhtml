<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:b="http://bootsfaces.net/ui">

<ui:composition template="template.xhtml">
	<f:metadata>
		<f:viewAction action="#{graficoBean.cargarDatos()}" />
	</f:metadata>
	<ui:define name="titulo">
           Yachay City Platform
        </ui:define>
	<ui:define name="contenido">
		<b:container>
			<center>
				<h1>Grupos del Personal por Sexo y Edad</h1>
			</center>
			<b:column span="12">
				<p:chart type="bar" model="#{graficoBean.barModel}"
					style="height:400px" responsive="true" widgetVar="chart1" />
			</b:column>
			<b:column offset="10" span="1" style="margin-bottom:30px;">
				<p:commandButton type="button" styleClass="btn btn-info"
					value="Exportar a Imagen" onclick="exportChart()" />
			</b:column>

			<script type="text/javascript">
function exportChart() {
    //export image
    $('#output').empty().append(PF('chart1').exportAsImage());
 
    //show the dialog
    PF('dlg').show();
}
</script>
			<center>
				<h1>Grupos del Personal por Sexo y Edad Porcentual</h1>
			</center>
			<b:column span="12">
				<p:chart type="bar" model="#{graficoBean.barModelP}"
					style="height:400px" responsive="true" widgetVar="chart2" />
			</b:column>
			<b:column offset="10" span="1" style="margin-bottom:30px;">
				<p:commandButton type="button" styleClass="btn btn-info"
					value="Exportar a Imagen" onclick="exportChart2()" />
			</b:column>

			<script type="text/javascript">
function exportChart2() {
    //export image
    $('#output').empty().append(PF('chart2').exportAsImage());
 
    //show the dialog
    PF('dlg').show();
}
</script>

			<p:dialog widgetVar="dlg" showEffect="fade" modal="true"
				header="Imagen del Gráfico" resizable="false">
				<p:outputPanel id="output" layout="block" />
			</p:dialog>

			<p:dialog widgetVar="statusDialog" modal="true" draggable="false"
				closable="false" resizable="false" showHeader="false">
				<p:graphicImage value="resources/img/cargando.gif" />
			</p:dialog>
		</b:container>
	</ui:define>
</ui:composition>
</html>